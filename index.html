<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>PolFun Box - IPTV</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/hls.js@0.14.17"></script>
</head>
<body>
  <!-- LOGIN SCREEN -->
  <div id="loginScreen" class="screen active">
    <div class="login-left">
      <div class="login-logo">
        <svg viewBox="0 0 24 24">
          <path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12zM9 10v4l5-2z" />
        </svg>
      </div>
      <div class="login-title">PolFun Box</div>
      <div class="login-subtitle">Streaming IPTV dla Fire TV</div>
      <div class="device-code-box">
        <div class="device-code-label">Kod urządzenia</div>
        <div class="device-code-value" id="deviceCode">--------</div>
      </div>
      <button class="btn btn-primary focusable" id="btnLoginDevice" tabindex="-1">Zaloguj kodem urządzenia</button>
      <button class="btn btn-secondary focusable" id="btnShowForm" tabindex="-1">Pokaż formularz rejestracji</button>
      <div class="version-text" id="versionText">v1.0.2 | Tizen</div>
    </div>
    <div class="login-right">
      <div class="login-form">
        <div class="form-title">Rejestracja konta</div>
        <div class="form-subtitle">Wprowadź dane serwera IPTV</div>
        <div class="alert alert-error" id="alertError"></div>
        <div class="alert alert-success" id="alertSuccess"></div>
        <div class="alert alert-warning" id="alertWarning"></div>
        <div class="form-group">
          <label class="form-label">Adres serwera</label>
          <input type="url" class="form-input focusable" id="inputServerUrl" placeholder="http://twoj-serwer.com" tabindex="-1" />
        </div>
        <div class="form-group">
          <label class="form-label">Nazwa użytkownika</label>
          <input type="text" class="form-input focusable" id="inputUsername" placeholder="Nazwa użytkownika" tabindex="-1" />
        </div>
        <div class="form-group">
          <label class="form-label">Hasło</label>
          <input type="password" class="form-input focusable" id="inputPassword" placeholder="Hasło" tabindex="-1" />
        </div>
        <button class="btn btn-primary focusable" id="btnRegister" tabindex="-1">Zarejestruj</button>
        <button class="btn btn-secondary focusable" id="btnRestart" tabindex="-1">Wyczyść dane i restart</button>
      </div>
    </div>
  </div>

  <!-- HOME SCREEN -->
  <div id="homeScreen" class="screen">
    <div class="home-header">
      <div class="home-clock" id="homeClock">--:--</div>
      <div class="home-logo">
        <div class="home-logo-icon">
          <svg viewBox="0 0 24 24">
            <path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12zM9 10v4l5-2z" />
          </svg>
        </div>
        <span class="home-logo-text">PolFun <span class="home-logo-box">Box</span></span>
      </div>
      <div class="home-user">
        <div class="home-username" id="homeUsername">--</div>
        <div class="home-expiry" id="homeExpiry">--</div>
      </div>
    </div>
    <div class="home-content">
      <div class="menu-card card-main focusable" id="cardLiveTv" tabindex="-1">
        <svg viewBox="0 0 24 24">
          <path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12zM9 10v4l5-2z" />
        </svg>
        <div class="card-title">Telewizja na żywo</div>
        <div class="card-count" id="liveTvCount">0 kanałów</div>
      </div>
      <div class="menu-grid">
        <div class="menu-card card-small focusable" id="cardMovies" tabindex="-1">
          <svg viewBox="0 0 24 24">
            <path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z" />
          </svg>
          <div class="card-title">Filmy</div>
          <div class="card-count" id="moviesCount">0</div>
        </div>
        <div class="menu-card card-small focusable" id="cardSeries" tabindex="-1">
          <svg viewBox="0 0 24 24">
            <path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zM12 5.5v9l6-4.5z" />
          </svg>
          <div class="card-title">Seriale</div>
          <div class="card-count" id="seriesCount">0</div>
        </div>
        <div class="menu-card card-small focusable" id="cardAccount" tabindex="-1">
          <svg viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
          </svg>
          <div class="card-title">Konto</div>
        </div>
        <div class="menu-card card-small focusable" id="cardSettings" tabindex="-1">
          <svg viewBox="0 0 24 24">
            <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
          </svg>
          <div class="card-title">Ustawienia</div>
        </div>
      </div>
      <div class="menu-sidebar">
        <div class="menu-card card-sidebar focusable" id="cardRefresh" tabindex="-1">
          <svg viewBox="0 0 24 24">
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
          </svg>
          <div class="card-title">Odśwież</div>
        </div>
        <div class="menu-card card-sidebar card-logout focusable" id="cardLogout" tabindex="-1">
          <svg viewBox="0 0 24 24">
            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
          </svg>
          <div class="card-title">Wyloguj</div>
        </div>
      </div>
    </div>
  </div>

  <!-- LIVE TV SCREEN -->
  <div id="liveTvScreen" class="screen">
    <div class="top-nav">
      <button class="nav-btn focusable" id="liveTvBtnHome" tabindex="-1">← Home</button>
      <div class="nav-divider"></div>
      <button class="nav-btn active">Telewizja</button>
      <div class="nav-divider"></div>
      <button class="nav-btn focusable" id="liveTvBtnMovies" tabindex="-1">Filmy</button>
      <div class="nav-divider"></div>
      <button class="nav-btn focusable" id="liveTvBtnSeries" tabindex="-1">Seriale</button>
      <button class="nav-btn nav-search focusable" id="btnSearch" tabindex="-1" title="Wyszukaj">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
      </button>
      <div class="nav-spacer"></div>
      <div class="nav-logo">PolFun Box</div>
    </div>
    <div class="content-area live">
      <div class="left-panel">
        <div class="sidebar-categories" id="liveTvCategories">
          <div class="loading-container"><div class="loading-spinner"></div></div>
        </div>
        <div class="sidebar-channels" id="liveTvChannels">
          <div class="loading-container"><div class="loading-spinner"></div></div>
        </div>
      </div>
      <div class="player-area">
        <div class="video-container" id="liveTvPlayerContainer">
          <video id="liveTvVideo" autoplay playsinline></video>
          <!-- AVPlayer object removed - not available on VegaOS -->
          <div class="player-loading" id="playerLoading"></div>
        </div>
        <div class="epg-panel">
          <div class="epg-channel-name" id="epgChannelName">Wybierz kanał</div>
          <div class="epg-current" id="epgCurrent">--</div>
          <div class="epg-next" id="epgNext">--</div>
          <div class="epg-progress">
            <div class="epg-progress-bar" id="epgProgress" style="width: 0%"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MOVIES SCREEN -->
  <div id="moviesScreen" class="screen">
    <div class="top-nav">
      <button class="nav-btn focusable" id="moviesBtnHome" tabindex="-1">← Home</button>
      <div class="nav-divider"></div>
      <button class="nav-btn focusable" id="moviesBtnTv" tabindex="-1">Telewizja</button>
      <div class="nav-divider"></div>
      <button class="nav-btn active">Filmy</button>
      <div class="nav-divider"></div>
      <button class="nav-btn focusable" id="moviesBtnSeries" tabindex="-1">Seriale</button>
      <button class="nav-btn nav-search focusable" id="btnSearch" tabindex="-1" title="Wyszukaj">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
      </button>
      <div class="nav-spacer"></div>
      <div class="nav-logo">PolFun Box</div>
    </div>
    <div class="content-area">
      <div class="sidebar-categories" id="moviesCategories">
        <div class="loading-container"><div class="loading-spinner"></div></div>
      </div>
      <div class="vod-grid-container">
        <div class="vod-grid" id="moviesGrid"></div>
      </div>
    </div>
  </div>

  <!-- SERIES SCREEN -->
  <div id="seriesScreen" class="screen">
    <div class="top-nav">
      <button class="nav-btn focusable" id="seriesBtnHome" tabindex="-1">← Home</button>
      <div class="nav-divider"></div>
      <button class="nav-btn focusable" id="seriesBtnTv" tabindex="-1">Telewizja</button>
      <div class="nav-divider"></div>
      <button class="nav-btn focusable" id="seriesBtnMovies" tabindex="-1">Filmy</button>
      <div class="nav-divider"></div>
      <button class="nav-btn active">Seriale</button>
      <button class="nav-btn nav-search focusable" id="btnSearch" tabindex="-1" title="Wyszukaj">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
      </button>
      <div class="nav-spacer"></div>
      <div class="nav-logo">PolFun Box</div>
    </div>
    <div class="content-area">
      <div class="sidebar-categories" id="seriesCategories">
        <div class="loading-container"><div class="loading-spinner"></div></div>
      </div>
      <div class="vod-grid-container">
        <div class="vod-grid" id="seriesGrid"></div>
      </div>
    </div>
  </div>

  <!-- SERIES DETAILS SCREEN -->
  <div id="seriesDetailsScreen" class="screen">
    <div class="top-nav">
      <button class="nav-btn focusable" id="detailsBtnBack" tabindex="-1">← Wróć</button>
      <div class="nav-spacer"></div>
      <div class="nav-logo">PolFun Box</div>
    </div>
    <div class="series-details-content">
      <div class="series-info-panel">
        <img class="series-poster-large" id="detailsPoster" src="" alt="" />
        <div class="series-title-large" id="detailsTitle">--</div>
        <div class="series-meta-item" id="detailsYear">Rok: --</div>
        <div class="series-meta-item" id="detailsRating">Ocena: --</div>
        <div class="series-meta-item" id="detailsGenre">Gatunek: --</div>
        <div class="series-plot" id="detailsPlot">--</div>
      </div>
      <div class="series-episodes-panel">
        <div class="seasons-tabs" id="seasonsTabs"></div>
        <div class="episodes-list" id="episodesList"></div>
      </div>
    </div>
  </div>

  <!-- VIDEO OVERLAY -->
  <div id="videoOverlay">
    <video id="overlayVideo" autoplay playsinline></video>
    <object id="avplayerOverlay" type="application/avplayer"></object>
    <div id="vodControls" class="vod-controls">
      <div class="vod-gradient-top"></div>
      <div class="vod-gradient-bottom"></div>
      <div class="vod-top-bar">
        <button class="vod-btn-back focusable" id="vodBtnBack" tabindex="-1">
          <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
        </button>
        <div class="vod-title-container">
          <div class="vod-title" id="vodTitle">Tytuł</div>
          <div class="vod-episode-info" id="vodEpisodeInfo"></div>
        </div>
      </div>
      <div class="vod-center-controls">
        <button class="vod-btn-control focusable" id="vodBtnRewind" tabindex="-1">
          <svg viewBox="0 0 24 24"><path d="M11.99 5V1l-5 5 5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6h-2c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/></svg>
          <span class="vod-control-label">-10s</span>
        </button>
        <button class="vod-btn-play focusable" id="vodBtnPlayPause" tabindex="-1">
          <svg id="vodPlayIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
          <svg id="vodPauseIcon" viewBox="0 0 24 24" style="display: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>
        <button class="vod-btn-control focusable" id="vodBtnForward" tabindex="-1">
          <svg viewBox="0 0 24 24"><path d="M12.01 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"/></svg>
          <span class="vod-control-label">+10s</span>
        </button>
      </div>
      <div class="vod-loading" id="vodLoading">
        <div class="loading-spinner"></div>
      </div>
      <div class="vod-bottom-bar">
        <div class="vod-seekbar-container">
          <div class="vod-seekbar-track" id="vodSeekbarTrack">
            <div class="vod-seekbar-progress" id="vodSeekbarProgress"></div>
            <div class="vod-seekbar-thumb" id="vodSeekbarThumb"></div>
          </div>
          <div class="vod-time-display">
            <span class="vod-time-current" id="vodTimeCurrent">00:00</span>
            <span class="vod-time-separator">/</span>
            <span class="vod-time-total" id="vodTimeTotal">00:00</span>
          </div>
        </div>
        <div class="vod-bottom-buttons">
          <button class="vod-btn-small focusable" id="vodBtnPlayPauseSmall" tabindex="-1">
            <svg id="vodPlayIconSmall" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
            <svg id="vodPauseIconSmall" viewBox="0 0 24 24" style="display: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
          </button>
        </div>
      </div>
    </div>
    <div class="overlay-loading" id="overlayLoading">
      <div class="loading-spinner"></div>
    </div>
  </div>

  <!-- ACCOUNT SCREEN -->
  <div id="accountScreen" class="screen">
    <div class="top-nav">
      <button class="nav-btn focusable" id="accountBtnBack" tabindex="-1">← Home</button>
      <div class="nav-spacer"></div>
      <div class="nav-logo">PolFun Box</div>
    </div>
    <div class="account-content">
      <div class="account-card">
        <div class="account-header">
          <div class="account-avatar">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
          </div>
          <div class="account-title">Informacje o koncie</div>
        </div>
        <div class="account-info-grid">
          <div class="account-info-item">
            <div class="account-info-label">Login</div>
            <div class="account-info-value" id="accountUsername">--</div>
          </div>
          <div class="account-info-item">
            <div class="account-info-label">Status</div>
            <div class="account-info-value" id="accountStatus">--</div>
          </div>
          <div class="account-info-item">
            <div class="account-info-label">Ważność do</div>
            <div class="account-info-value" id="accountExpiry">--</div>
          </div>
          <div class="account-info-item">
            <div class="account-info-label">Aktywne połączenia</div>
            <div class="account-info-value" id="accountConnections">--</div>
          </div>
          <div class="account-info-item">
            <div class="account-info-label">Max połączeń</div>
            <div class="account-info-value" id="accountMaxConnections">--</div>
          </div>
          <div class="account-info-item">
            <div class="account-info-label">Kod urządzenia</div>
            <div class="account-info-value account-device-code" id="accountDeviceCode">--</div>
          </div>
          <div class="account-info-item">
            <div class="account-info-label">Serwer</div>
            <div class="account-info-value" id="accountServer">--</div>
          </div>
          <div class="account-info-item">
            <div class="account-info-label">Utworzono</div>
            <div class="account-info-value" id="accountCreated">--</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SETTINGS SCREEN -->
  <div id="settingsScreen" class="screen">
    <div class="top-nav">
      <button class="nav-btn focusable" id="settingsBtnBack" tabindex="-1">← Home</button>
      <div class="nav-spacer"></div>
      <div class="nav-logo">PolFun Box</div>
    </div>
    <div class="settings-content">
      <div class="settings-section">
        <div class="settings-section-title">Odtwarzanie</div>
        <div class="settings-item">
          <div class="settings-item-info">
            <div class="settings-item-label">Format strumienia</div>
            <div class="settings-item-desc">Wybierz format dla kanałów na żywo</div>
          </div>
          <div class="settings-item-control">
            <select class="settings-select focusable" id="settingStreamFormat" tabindex="-1">
              <option value="m3u8">HLS (m3u8)</option>
              <option value="ts">MPEG-TS (ts)</option>
            </select>
          </div>
        </div>
        <div class="settings-item">
          <div class="settings-item-info">
            <div class="settings-item-label">Format VOD</div>
            <div class="settings-item-desc">Format dla filmów i seriali</div>
          </div>
          <div class="settings-item-control">
            <select class="settings-select focusable" id="settingVodFormat" tabindex="-1">
              <option value="mp4">MP4</option>
              <option value="mkv">MKV</option>
              <option value="m3u8">HLS (m3u8)</option>
            </select>
          </div>
        </div>
      </div>
      <div class="settings-section">
        <div class="settings-section-title">Kontrola rodzicielska</div>
        <div class="settings-item">
          <div class="settings-item-info">
            <div class="settings-item-label">Blokada PIN</div>
            <div class="settings-item-desc">Zablokuj kanały dla dorosłych kodem PIN</div>
          </div>
          <div class="settings-item-control">
            <button class="btn btn-secondary focusable" id="btnSetupPin" tabindex="-1">Ustaw PIN</button>
          </div>
        </div>
        <div class="settings-item">
          <div class="settings-item-info">
            <div class="settings-item-label">Status blokady</div>
            <div class="settings-item-desc" id="pinStatusDesc">PIN nie ustawiony</div>
          </div>
          <div class="settings-item-control">
            <button class="btn btn-secondary focusable" id="btnDisablePin" tabindex="-1" style="display:none">Wyłącz PIN</button>
          </div>
        </div>
      </div>
      <div class="settings-section">
        <div class="settings-section-title">Aplikacja</div>
        <div class="settings-item">
          <div class="settings-item-info">
            <div class="settings-item-label">Wersja</div>
            <div class="settings-item-desc" id="settingsVersion">--</div>
          </div>
        </div>
      </div>
      <button class="btn btn-primary focusable settings-save-btn" id="btnSaveSettings" tabindex="-1">Zapisz ustawienia</button>
    </div>
  </div>

  <!-- MOVIE DETAILS SCREEN -->
  <div id="movieDetailsScreen" class="screen">
    <div class="top-nav">
      <button class="nav-btn focusable" id="movieDetailsBtnBack" tabindex="-1">← Wróć</button>
      <div class="nav-spacer"></div>
      <div class="nav-logo">PolFun Box</div>
    </div>
    <div class="movie-details-content">
      <div class="movie-backdrop" id="movieBackdrop"></div>
      <div class="movie-details-overlay">
        <div class="movie-poster-section">
          <img class="movie-poster-large" id="moviePoster" src="" alt="" />
        </div>
        <div class="movie-info-section">
          <div class="movie-title-large" id="movieTitle">--</div>
          <div class="movie-meta">
            <span class="movie-meta-item" id="movieYear">--</span>
            <span class="movie-meta-separator">•</span>
            <span class="movie-meta-item" id="movieDuration">--</span>
            <span class="movie-meta-separator">•</span>
            <span class="movie-meta-item movie-rating" id="movieRating">--</span>
          </div>
          <div class="movie-genres" id="movieGenres">--</div>
          <div class="movie-plot" id="moviePlot">--</div>
          <div class="movie-cast" id="movieCast"></div>
          <div class="movie-actions">
            <button class="btn btn-primary btn-play focusable" id="btnPlayMovie" tabindex="-1">
              <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
              Odtwórz
            </button>
            <button class="btn btn-secondary focusable" id="btnTrailer" tabindex="-1" style="display:none">
              <svg viewBox="0 0 24 24"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/></svg>
              Zwiastun
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- PIN MODAL -->
  <div id="pinModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-title" id="pinModalTitle">Wprowadź PIN</div>
      <div class="pin-display">
        <div class="pin-dot" id="pinDot1"></div>
        <div class="pin-dot" id="pinDot2"></div>
        <div class="pin-dot" id="pinDot3"></div>
        <div class="pin-dot" id="pinDot4"></div>
      </div>
      <div class="pin-keypad">
        <button class="pin-key focusable" data-key="1" tabindex="-1">1</button>
        <button class="pin-key focusable" data-key="2" tabindex="-1">2</button>
        <button class="pin-key focusable" data-key="3" tabindex="-1">3</button>
        <button class="pin-key focusable" data-key="4" tabindex="-1">4</button>
        <button class="pin-key focusable" data-key="5" tabindex="-1">5</button>
        <button class="pin-key focusable" data-key="6" tabindex="-1">6</button>
        <button class="pin-key focusable" data-key="7" tabindex="-1">7</button>
        <button class="pin-key focusable" data-key="8" tabindex="-1">8</button>
        <button class="pin-key focusable" data-key="9" tabindex="-1">9</button>
        <button class="pin-key pin-key-clear focusable" data-key="clear" tabindex="-1">C</button>
        <button class="pin-key focusable" data-key="0" tabindex="-1">0</button>
        <button class="pin-key pin-key-back focusable" data-key="back" tabindex="-1">←</button>
      </div>
      <div class="pin-error" id="pinError"></div>
      <button class="btn btn-secondary modal-close focusable" id="pinModalClose" tabindex="-1">Anuluj</button>
    </div>
  </div>

  <!-- DEBUG LOG -->
  <div id="debugLog"></div>

  <!-- FULLSCREEN EPG OVERLAY -->
  <div id="fullscreenEpgOverlay" class="fs-epg-overlay">
    <div class="fs-epg-card">
      <div class="fs-epg-content">
        <div class="fs-epg-header">
          <img class="fs-channel-logo" id="fsChannelLogo" src="" alt="" />
          <div class="fs-epg-info">
            <div class="fs-epg-row">
              <span class="fs-time" id="fsCurrentTime">--:--</span>
              <span class="fs-title" id="fsCurrentTitle">Brak programu</span>
            </div>
            <div class="fs-epg-row fs-epg-next">
              <span class="fs-time" id="fsNextTime">--:--</span>
              <span class="fs-title" id="fsNextTitle">--</span>
            </div>
          </div>
          <div class="fs-epg-controls">
            <button class="fs-control-btn focusable" id="fsBtnPrev" tabindex="-1">
              <svg viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
            </button>
            <button class="fs-control-btn focusable" id="fsBtnNext" tabindex="-1">
              <svg viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
            </button>
          </div>
        </div>
        <div class="fs-epg-progress-container">
          <div class="fs-epg-progress-bar" id="fsEpgProgressBar"></div>
        </div>
        <div class="fs-epg-hint">▲/▼ Zmiana kanału • OK Info • BACK Wyjście</div>
      </div>
    </div>
  </div>
<!-- W sekcji body, po istniejących screenach, dodaj: -->

<!-- FAVORITES SCREEN -->
<div id="favoritesScreen" class="screen">
  <div class="top-nav">
    <button class="nav-btn focusable" id="favoritesBtnBack" tabindex="-1">← Home</button>
    <div class="nav-spacer"></div>
    <div class="nav-logo">PolFun Box</div>
  </div>
  <div class="favorites-tabs">
    <button class="tab focusable active" data-type="channels" tabindex="-1">Kanały</button>
    <button class="tab focusable" data-type="movies" tabindex="-1">Filmy</button>
    <button class="tab focusable" data-type="series" tabindex="-1">Serie</button>
  </div>
  <div class="favorites-content" id="favoritesContent">
    <div class="loading-container"><div class="loading-spinner"></div></div>
  </div>
</div>
  <script src="scripts.js"></script>
  
  <!-- MODAL WYSZUKIWANIA -->
  <div id="searchModal" class="modal" style="display: none;">
    <div class="modal-content search-modal-content">
      <div class="search-header">
        <input type="text" id="searchInput" class="search-input" placeholder="Wyszukaj kanały, filmy, seriale..." autocomplete="off">
        <button class="search-close" id="searchClose">✕</button>
      </div>
      <div id="searchResults" class="search-results">
        <div class="search-hint">Wpisz co najmniej 2 znaki aby wyszukać</div>
      </div>
    </div>
  </div>
</body>
</html>